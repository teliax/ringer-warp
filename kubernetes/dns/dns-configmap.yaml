apiVersion: v1
kind: ConfigMap
metadata:
  name: dns-configuration
  namespace: default
data:
  # Production domain configuration
  production.domain: "ringer.tel"
  production.api.subdomain: "api"
  production.sip.subdomain: "sip"
  production.grafana.subdomain: "grafana"
  production.prometheus.subdomain: "prometheus"
  production.homer.subdomain: "homer"
  
  # Staging domain configuration (if available)
  staging.domain: "ringer.net"
  staging.api.subdomain: "api-staging"
  staging.sip.subdomain: "sip-staging"
  staging.grafana.subdomain: "grafana-staging"
  staging.prometheus.subdomain: "prometheus-staging"
  staging.homer.subdomain: "homer-staging"
  
  # SRV record configuration
  srv.priority: "10"
  srv.weight: "100"
  srv.port.udp: "5060"
  srv.port.tcp: "5060"
  srv.port.tls: "5061"
  
  # TTL configuration
  ttl.dynamic: "300"   # 5 minutes for frequently changing services
  ttl.stable: "3600"   # 1 hour for stable services
  ttl.srv: "300"       # 5 minutes for SRV records

---
# Secret for Gandi API integration with workload identity
apiVersion: v1
kind: Secret
metadata:
  name: gandi-api-config
  namespace: default
  annotations:
    # Reference to GCP secret
    kubernetes.io/gcp-secret-name: "gandi-api-key"
type: Opaque
data:
  # This will be populated by the setup script
  # or can be manually set with:
  # echo -n "your-api-key" | base64
  api-key: ""