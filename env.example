# WARP Platform Environment Configuration
# Copy this file to .env.development, .env.staging, or .env.production
# and fill in the appropriate values

# =====================================================
# ENVIRONMENT
# =====================================================
NODE_ENV=development
DEBUG=false
LOG_LEVEL=info

# =====================================================
# GCP CONFIGURATION
# =====================================================
GCP_PROJECT_ID=your-project-id
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# =====================================================
# DATABASE CONFIGURATION (Cloud SQL PostgreSQL)
# =====================================================
# Primary database for customer data, configs, etc.
# Note: NO CockroachDB - using Cloud SQL with regional replication
POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_USER=warp_user
POSTGRES_PASSWORD=
POSTGRES_DB=warp
POSTGRES_SSL_MODE=require

# Connection pooling
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=10

# =====================================================
# BIGQUERY CONFIGURATION (Analytics & CDRs)
# =====================================================
BIGQUERY_PROJECT_ID=${GCP_PROJECT_ID}
BIGQUERY_DATASET=warp_telecom
BIGQUERY_CDR_TABLE=cdrs
BIGQUERY_MDR_TABLE=mdrs
BIGQUERY_LOCATION=US

# =====================================================
# REDIS CONFIGURATION (Memorystore)
# =====================================================
# Used for Kamailio state, sessions, and caching
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CLUSTER_ENABLED=false

# Session store
REDIS_SESSION_PREFIX=session:
REDIS_SESSION_TTL=86400

# Kamailio integration
REDIS_KAMAILIO_DB=1

# =====================================================
# KAMAILIO CONFIGURATION
# =====================================================
# Note: Multiple Kamailio pods will be created by k8s
# These are for the service discovery/load balancer
KAMAILIO_SERVICE_HOST=kamailio-service.default.svc.cluster.local
KAMAILIO_SERVICE_PORT=5060
KAMAILIO_TLS_PORT=5061
KAMAILIO_WS_PORT=8080
KAMAILIO_WSS_PORT=8443

# Database for Kamailio (uses same PostgreSQL instance)
KAMAILIO_DB_HOST=${POSTGRES_HOST}
KAMAILIO_DB_NAME=kamailio
KAMAILIO_DB_USER=kamailio_user
KAMAILIO_DB_PASSWORD=

# =====================================================
# RTPENGINE CONFIGURATION
# =====================================================
# RTPEngine runs on VMs, not in k8s
RTPENGINE_CONTROL_PORT=2223
RTPENGINE_MIN_PORT=10000
RTPENGINE_MAX_PORT=60000
RTPENGINE_TIMEOUT=60

# =====================================================
# JASMIN SMSC CONFIGURATION
# =====================================================
JASMIN_HOST=jasmin-service.default.svc.cluster.local
JASMIN_HTTP_PORT=1401
JASMIN_CLI_PORT=8990
JASMIN_ADMIN_USERNAME=jcliadmin
JASMIN_ADMIN_PASSWORD=

# RabbitMQ for Jasmin
RABBITMQ_HOST=rabbitmq-service.default.svc.cluster.local
RABBITMQ_PORT=5672
RABBITMQ_USER=jasmin
RABBITMQ_PASSWORD=
RABBITMQ_VHOST=jasmin


# =====================================================
# EXTERNAL INTEGRATIONS
# =====================================================

# Sinch (SMS/Voice Provider)
SINCH_APP_KEY=
SINCH_APP_SECRET=
SINCH_SERVICE_PLAN_ID=
SINCH_API_URL=https://sms.api.sinch.com
SMPP_HOST=smpp.sinch.com
SMPP_PORT=2775
SMPP_SYSTEM_ID=
SMPP_PASSWORD=
SMPP_SYSTEM_TYPE=

# Telique (Telecom Data)
TELIQUE_API_KEY=
TELIQUE_API_URL=https://api.telique.com/v1
TELIQUE_ACCOUNT_ID=
TELIQUE_ENABLE_LRN=true
TELIQUE_ENABLE_CNAM=true
TELIQUE_ENABLE_LERG=true

# HubSpot (CRM)
HUBSPOT_API_KEY=
HUBSPOT_PORTAL_ID=
HUBSPOT_API_URL=https://api.hubapi.com

# Authorize.Net (Payment Processing)
AUTHORIZE_NET_API_LOGIN_ID=
AUTHORIZE_NET_TRANSACTION_KEY=
AUTHORIZE_NET_SANDBOX=true
AUTHORIZE_NET_API_URL=https://apitest.authorize.net/xml/v1/request.api

# Mustache/Plaid (ACH Payments)
MUSTACHE_API_KEY=
MUSTACHE_SECRET_KEY=
MUSTACHE_ENVIRONMENT=sandbox
PLAID_CLIENT_ID=
PLAID_SECRET=
PLAID_ENVIRONMENT=sandbox

# Avalara (Tax Calculation)
AVALARA_ACCOUNT_ID=
AVALARA_LICENSE_KEY=
AVALARA_API_URL=https://sandbox-rest.avatax.com
AVALARA_COMPANY_CODE=

# SendGrid (Email)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@ringer.tel
SENDGRID_FROM_NAME=WARP Platform

# =====================================================
# API CONFIGURATION
# =====================================================
API_HOST=0.0.0.0
API_PORT=3000
API_BASE_URL=https://api.ringer.tel
API_VERSION=v1

# Rate limiting
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=100

# CORS
API_CORS_ENABLED=true
API_CORS_ORIGINS=https://console.ringer.tel,https://admin.ringer.tel


# =====================================================
# MONITORING & OBSERVABILITY
# =====================================================
# Prometheus (GCP Managed)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_HOST=grafana-service.monitoring.svc.cluster.local
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=

# Homer SIP Capture
HOMER_HOST=homer-service.default.svc.cluster.local
HOMER_PORT=9080
HOMER_DB_HOST=${POSTGRES_HOST}
HOMER_DB_NAME=homer
HOMER_DB_USER=homer_user
HOMER_DB_PASSWORD=

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${NODE_ENV}
SENTRY_TRACES_SAMPLE_RATE=0.1

# =====================================================
# CLOUD SERVICES
# =====================================================
# Cloud Pub/Sub
PUBSUB_PROJECT_ID=${GCP_PROJECT_ID}
PUBSUB_CDR_TOPIC=cdr-events
PUBSUB_MDR_TOPIC=mdr-events
PUBSUB_BILLING_TOPIC=billing-events

# Cloud Tasks
CLOUD_TASKS_PROJECT_ID=${GCP_PROJECT_ID}
CLOUD_TASKS_LOCATION=${GCP_REGION}
CLOUD_TASKS_QUEUE=billing-queue

# Cloud Storage
STORAGE_BUCKET=warp-storage-${GCP_PROJECT_ID}
STORAGE_CDR_PREFIX=cdrs/
STORAGE_BACKUP_PREFIX=backups/

# =====================================================
# FEATURE FLAGS
# =====================================================
FEATURE_SMS_ENABLED=true
FEATURE_MMS_ENABLED=true
FEATURE_TOLLFREE_ENABLED=true
FEATURE_INTERNATIONAL_ENABLED=false
FEATURE_E911_ENABLED=false
FEATURE_CNAM_ENABLED=true
FEATURE_STIR_SHAKEN_ENABLED=false

# =====================================================
# SECURITY
# =====================================================
# Encryption
ENCRYPTION_KEY=
ENCRYPTION_ALGORITHM=aes-256-gcm

# API Keys (for internal service communication)
INTERNAL_API_KEY=

# IP Whitelisting
IP_WHITELIST_ENABLED=false
IP_WHITELIST=

# =====================================================
# DEVELOPMENT/DEBUG OPTIONS
# =====================================================
# Mock services for development
MOCK_SMS_ENABLED=false
MOCK_BILLING_ENABLED=false
MOCK_TELIQUE_ENABLED=false

# Logging
LOG_FORMAT=json
LOG_TO_FILE=false
LOG_FILE_PATH=/var/log/warp/app.log

# Debug options
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_HTTP=false
