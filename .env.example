# WARP Platform Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================
# DEPLOYMENT ENVIRONMENT
# ============================================
NODE_ENV=development
APP_ENV=development
DEBUG=false
LOG_LEVEL=info

# ============================================
# API CONFIGURATION
# ============================================
API_BASE_URL=https://api.warp.io
API_VERSION=v1
API_PORT=8080
API_RATE_LIMIT=1000
API_TIMEOUT_MS=30000

# ============================================
# DATABASE CONNECTIONS
# ============================================

# PostgreSQL (Cloud SQL)
POSTGRES_HOST=10.x.x.x
POSTGRES_PORT=5432
POSTGRES_DB=warp_production
POSTGRES_USER=warp_admin
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_SSL_MODE=require
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_CONNECTION_TIMEOUT_MS=10000

# CockroachDB (Distributed SQL)
COCKROACH_HOST=cockroach-cluster.warp.local
COCKROACH_PORT=26257
COCKROACH_DB=warp_global
COCKROACH_USER=warp_service
COCKROACH_PASSWORD=your_cockroach_password_here
COCKROACH_CLUSTER=warp-production
COCKROACH_SSL_CERT=/path/to/ca.crt
COCKROACH_SSL_KEY=/path/to/client.key

# Redis (Caching & Sessions)
REDIS_HOST=redis-cluster.warp.local
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_CLUSTER_ENABLED=true
REDIS_SENTINEL_HOSTS=sentinel1:26379,sentinel2:26379,sentinel3:26379
REDIS_TLS_ENABLED=true

# ============================================
# AUTHENTICATION & AUTHORIZATION
# ============================================

# OAuth Provider (Auth0 or Keycloak)
OAUTH_PROVIDER=auth0  # auth0 or keycloak

# Auth0 Configuration
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your_auth0_client_id_here
AUTH0_CLIENT_SECRET=your_auth0_client_secret_here
AUTH0_AUDIENCE=https://api.warp.io
AUTH0_MANAGEMENT_API_TOKEN=your_auth0_mgmt_token_here
AUTH0_CALLBACK_URL=https://app.warp.io/auth/callback

# Keycloak Configuration (if using instead of Auth0)
KEYCLOAK_URL=https://auth.warp.io
KEYCLOAK_REALM=warp
KEYCLOAK_CLIENT_ID=warp-api
KEYCLOAK_CLIENT_SECRET=your_keycloak_secret_here
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=your_keycloak_admin_password_here

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here_min_32_chars
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=your_jwt_refresh_secret_here_min_32_chars
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# VERCEL DEPLOYMENT
# ============================================
VERCEL_TOKEN=your_vercel_api_token_here
VERCEL_ORG_ID=your_vercel_org_id_here
VERCEL_PROJECT_ID=your_vercel_project_id_here
NEXT_PUBLIC_API_URL=https://api.warp.io/v1
NEXT_PUBLIC_WS_URL=wss://api.warp.io/ws

# ============================================
# GOOGLE CLOUD PLATFORM
# ============================================
GCP_PROJECT_ID=warp-production
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# Cloud Storage
GCS_BUCKET_CDR=warp-cdr-archive
GCS_BUCKET_RECORDINGS=warp-call-recordings
GCS_BUCKET_BACKUPS=warp-backups

# BigQuery Configuration
BQ_PROJECT_ID=warp-production
BQ_DATASET_TELECOM=warp_telecom
BQ_TABLE_CDRS=cdrs
BQ_TABLE_MDRS=mdrs
BQ_TABLE_CDRS_STREAMING=cdrs_streaming
BQ_TABLE_MDRS_STREAMING=mdrs_streaming
BQ_LOCATION=US
BQ_PARTITION_EXPIRATION_DAYS=2555  # 7 years

# Pub/Sub Topics for CDR/MDR ingestion
PUBSUB_TOPIC_CDRS=projects/warp-production/topics/cdrs
PUBSUB_TOPIC_MDRS=projects/warp-production/topics/mdrs
PUBSUB_SUBSCRIPTION_CDRS=projects/warp-production/subscriptions/cdr-processing
PUBSUB_SUBSCRIPTION_MDRS=projects/warp-production/subscriptions/mdr-processing

# Dataflow Configuration
DATAFLOW_TEMPLATE_CDR=gs://warp-dataflow-templates/cdr-processing
DATAFLOW_REGION=us-central1
DATAFLOW_STAGING_BUCKET=warp-dataflow-staging
DATAFLOW_TEMP_BUCKET=warp-dataflow-temp

# Cloud KMS
GCP_KMS_KEYRING=warp-keyring
GCP_KMS_KEY=warp-master-key
GCP_KMS_LOCATION=us-central1

# Cloud SQL Proxy
CLOUD_SQL_CONNECTION_NAME=warp-production:us-central1:warp-db

# ============================================
# SINCH SMS/VOICE INTEGRATION
# ============================================
SINCH_APP_KEY=your_sinch_app_key_here
SINCH_APP_SECRET=your_sinch_app_secret_here
SINCH_PROJECT_ID=your_sinch_project_id_here
SINCH_SMS_SERVICE_PLAN_ID=your_service_plan_id_here
SINCH_VOICE_APPLICATION_KEY=your_voice_app_key_here
SINCH_VOICE_APPLICATION_SECRET=your_voice_app_secret_here
SINCH_WEBHOOK_SECRET=your_webhook_secret_here
SINCH_API_URL=https://sms.api.sinch.com
SINCH_VOICE_API_URL=https://calling.api.sinch.com

# SMPP Binds for A2P SMS
SMPP_HOST=smpp.sinch.com
SMPP_PORT=2775
SMPP_SYSTEM_ID=your_system_id_here
SMPP_PASSWORD=your_smpp_password_here
SMPP_SYSTEM_TYPE=transceiver
SMPP_BIND_TYPE=transceiver
SMPP_DLR_ENABLED=true

# ============================================
# JASMIN SMS GATEWAY
# ============================================
JASMIN_HOST=jasmin.warp.local
JASMIN_HTTP_PORT=8080
JASMIN_ADMIN_PORT=8990
JASMIN_ADMIN_USER=admin
JASMIN_ADMIN_PASSWORD=your_jasmin_admin_password_here
JASMIN_SMPP_PORT=2775
JASMIN_RABBITMQ_HOST=rabbitmq.warp.local
JASMIN_RABBITMQ_PORT=5672
JASMIN_RABBITMQ_USER=jasmin
JASMIN_RABBITMQ_PASSWORD=your_rabbitmq_password_here

# ============================================
# TELIQUE API (LERG/LRN/CNAM)
# ============================================
TELIQUE_API_URL=https://api.telique.com
TELIQUE_API_KEY=your_telique_api_key_here
TELIQUE_API_SECRET=your_telique_api_secret_here
TELIQUE_ACCOUNT_ID=your_telique_account_id_here
TELIQUE_LERG_ENABLED=true
TELIQUE_LRN_ENABLED=true
TELIQUE_CNAM_ENABLED=true
TELIQUE_CACHE_TTL_SECONDS=3600

# ============================================
# KAMAILIO SIP SERVER
# ============================================
KAMAILIO_DB_HOST=postgres.warp.local
KAMAILIO_DB_PORT=5432
KAMAILIO_DB_NAME=kamailio
KAMAILIO_DB_USER=kamailio
KAMAILIO_DB_PASSWORD=your_kamailio_db_password_here
KAMAILIO_SIP_DOMAIN=sip.warp.io
KAMAILIO_PUBLIC_IP=x.x.x.x
KAMAILIO_PRIVATE_IP=10.x.x.x
KAMAILIO_WS_PORT=8080
KAMAILIO_WSS_PORT=8443
KAMAILIO_TLS_CERT=/etc/kamailio/certs/server.crt
KAMAILIO_TLS_KEY=/etc/kamailio/certs/server.key

# ============================================
# RTPENGINE MEDIA SERVER
# ============================================
RTPENGINE_HOST=rtpengine.warp.local
RTPENGINE_PORT=22222
RTPENGINE_CONTROL_PORT=22223
RTPENGINE_PUBLIC_IP=x.x.x.x
RTPENGINE_PRIVATE_IP=10.x.x.x
RTPENGINE_MIN_PORT=10000
RTPENGINE_MAX_PORT=20000
RTPENGINE_RECORDING_ENABLED=true
RTPENGINE_RECORDING_PATH=/var/spool/rtpengine
RTPENGINE_TRANSCODING_ENABLED=true

# ============================================
# CONSUL SERVICE DISCOVERY
# ============================================
CONSUL_HOST=consul.warp.local
CONSUL_PORT=8500
CONSUL_DATACENTER=us-central1
CONSUL_ACL_TOKEN=your_consul_acl_token_here
CONSUL_ENCRYPT_KEY=your_consul_encrypt_key_here
CONSUL_TLS_ENABLED=true
CONSUL_CA_CERT=/etc/consul/ca.crt
CONSUL_CLIENT_CERT=/etc/consul/client.crt
CONSUL_CLIENT_KEY=/etc/consul/client.key

# ============================================
# HOMER SIP CAPTURE
# ============================================
HOMER_HOST=homer.warp.io
HOMER_HEP_HOST=homer-hep.homer.svc.cluster.local
HOMER_HEP_PORT=9060
HOMER_HEP_PROTOCOL=udp
HOMER_DB_HOST=homer-postgres.homer.svc.cluster.local
HOMER_DB_PORT=5432
HOMER_DB_NAME=homer
HOMER_DB_USER=homer
HOMER_DB_PASSWORD=your_homer_db_password_here
HOMER_API_URL=https://homer.warp.io/api/v3
HOMER_API_USER=admin
HOMER_API_PASSWORD=your_homer_api_password_here
HOMER_CAPTURE_ID=2001
HOMER_RETENTION_DAYS=30
HOMER_RTP_RETENTION_DAYS=7

# ============================================
# MONITORING & OBSERVABILITY
# ============================================

# Prometheus
PROMETHEUS_HOST=prometheus.warp.local
PROMETHEUS_PORT=9090
PROMETHEUS_PUSHGATEWAY_URL=http://pushgateway.warp.local:9091

# Grafana
GRAFANA_HOST=grafana.warp.local
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.warp.local:4317
OTEL_EXPORTER_OTLP_HEADERS=x-api-key=your_otel_api_key_here
OTEL_SERVICE_NAME=warp-api
OTEL_TRACES_ENABLED=true
OTEL_METRICS_ENABLED=true

# Sentry Error Tracking
SENTRY_DSN=https://your_key@sentry.io/your_project_id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# NETSUITE INTEGRATION
# ============================================

# NetSuite Account Configuration
NETSUITE_ACCOUNT_ID=your_netsuite_account_id_here
NETSUITE_CONSUMER_KEY=your_consumer_key_here
NETSUITE_CONSUMER_SECRET=your_consumer_secret_here
NETSUITE_TOKEN_ID=your_token_id_here
NETSUITE_TOKEN_SECRET=your_token_secret_here
NETSUITE_ENVIRONMENT=PRODUCTION  # SANDBOX or PRODUCTION

# NetSuite API Settings
NETSUITE_API_VERSION=2023.2
NETSUITE_SUITETALK_URL=https://your_account.suitetalk.api.netsuite.com
NETSUITE_REST_URL=https://your_account.restlets.api.netsuite.com
NETSUITE_WEBSERVICES_URL=https://your_account.webservices.netsuite.com

# NetSuite Integration Settings
NETSUITE_SYNC_ENABLED=true
NETSUITE_AUTO_INVOICE=true
NETSUITE_INVOICE_FORM_ID=your_invoice_form_id_here
NETSUITE_SUBSIDIARY_ID=your_subsidiary_id_here
NETSUITE_DEPARTMENT_ID=your_department_id_here
NETSUITE_LOCATION_ID=your_location_id_here
NETSUITE_CLASS_ID=your_class_id_here

# NetSuite Custom Fields (for telecom data)
NETSUITE_FIELD_TRUNK_ID=custcol_warp_trunk_id
NETSUITE_FIELD_JURISDICTION=custcol_jurisdiction
NETSUITE_FIELD_CALL_COUNT=custcol_call_count
NETSUITE_FIELD_ASR=custcol_asr
NETSUITE_FIELD_ACD=custcol_acd
NETSUITE_FIELD_WARP_CUSTOMER_ID=custentity_warp_id

# NetSuite Billing Items
NETSUITE_ITEM_VOICE_INTERSTATE=1001
NETSUITE_ITEM_VOICE_INTRASTATE=1002
NETSUITE_ITEM_VOICE_LOCAL=1003
NETSUITE_ITEM_VOICE_INTL=1004
NETSUITE_ITEM_SMS_DOMESTIC=2001
NETSUITE_ITEM_SMS_INTL=2002
NETSUITE_ITEM_MMS_DOMESTIC=2003
NETSUITE_ITEM_TOLLFREE_INBOUND=3001
NETSUITE_ITEM_DID_RENTAL=4001
NETSUITE_ITEM_TRUNK_RENTAL=4002
NETSUITE_ITEM_E911_SERVICE=4003

# ============================================
# BILLING & PAYMENTS
# ============================================

# Payment Processing (for prepaid and real-time auth)
PAYMENT_PROCESSOR=stripe  # stripe, square, or netsuite_only
STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key_here
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Tax Calculation Service (if not using NetSuite tax)
TAX_SERVICE_PROVIDER=netsuite  # netsuite, avalara, taxjar, or custom
AVALARA_ACCOUNT_ID=your_avalara_account_here
AVALARA_LICENSE_KEY=your_avalara_license_here
AVALARA_COMPANY_CODE=your_company_code_here

# ============================================
# EMAIL SERVICE
# ============================================
EMAIL_PROVIDER=sendgrid  # sendgrid, ses, or smtp
SENDGRID_API_KEY=your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=noreply@warp.io
SENDGRID_FROM_NAME=WARP Platform

# SMTP Configuration (if not using SendGrid)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your_smtp_user_here
SMTP_PASSWORD=your_smtp_password_here

# ============================================
# WEBHOOK CONFIGURATION
# ============================================
WEBHOOK_SECRET=your_webhook_secret_here_min_32_chars
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_MS=1000
WEBHOOK_TIMEOUT_MS=5000

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_E911_ENABLED=true
FEATURE_CNAM_ENABLED=true
FEATURE_STIR_SHAKEN_ENABLED=true
FEATURE_TRANSCODING_ENABLED=true
FEATURE_RECORDING_ENABLED=true
FEATURE_SMS_ENABLED=true
FEATURE_MMS_ENABLED=true
FEATURE_RCS_ENABLED=false
FEATURE_INTERNATIONAL_ENABLED=true

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# ============================================
# SECURITY
# ============================================
CORS_ALLOWED_ORIGINS=https://app.warp.io,https://warp.io
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_CREDENTIALS=true

# Session Configuration
SESSION_SECRET=your_session_secret_here_min_32_chars
SESSION_MAX_AGE_MS=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_here
DR_REGION=us-east1
DR_ENABLED=true

# ============================================
# DEVELOPMENT & TESTING
# ============================================
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/warp_test
TEST_REDIS_URL=redis://localhost:6379/1
MOCK_SMS_ENABLED=false
MOCK_VOICE_ENABLED=false
MOCK_TELIQUE_ENABLED=false

# ============================================
# COMPLIANCE & REGULATORY
# ============================================
STIR_SHAKEN_CERT=/etc/stir/cert.pem
STIR_SHAKEN_KEY=/etc/stir/key.pem
STIR_SHAKEN_PROVIDER=iconectiv
STIR_SHAKEN_API_KEY=your_stir_shaken_api_key_here

E911_PROVIDER=bandwidth
E911_API_KEY=your_e911_api_key_here
E911_API_SECRET=your_e911_api_secret_here

# ============================================
# PAGERDUTY INTEGRATION
# ============================================
PAGERDUTY_INTEGRATION_KEY=your_pagerduty_key_here
PAGERDUTY_SERVICE_ID=your_service_id_here
PAGERDUTY_ESCALATION_POLICY_ID=your_policy_id_here

# ============================================
# SLACK INTEGRATION
# ============================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_ALERTS_CHANNEL=#warp-alerts
SLACK_OPS_CHANNEL=#warp-ops