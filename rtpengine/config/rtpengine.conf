# RTPEngine Configuration File
# Optimized for Kamailio Integration

[rtpengine]
# Network interfaces
# Format: [NAME/]IP[!IP]
# Use the actual IP addresses of your RTPEngine VMs
interface = external/34.123.38.31!34.123.38.31
#interface = external/35.222.101.214!35.222.101.214
#interface = external/35.225.65.80!35.225.65.80

# Alternative: Use interface names
#interface = external/eth0!10.0.0.10
#interface = internal/eth1

# Listen address for control protocol (Kamailio communication)
listen-ng = 127.0.0.1:22222
listen-tcp = 127.0.0.1:22222
listen-udp = 127.0.0.1:22222

# CLI interface
listen-cli = 127.0.0.1:22223

# RTP/RTCP port range
port-min = 30000
port-max = 40000

# Number of threads for media relay
num-threads = 16

# Media timeouts
timeout = 60
silent-timeout = 3600
final-timeout = 10800

# Codec handling
# Transcode between codecs if needed
# codec-mask-PCMU = 0
# codec-mask-PCMA = 0
# codec-mask-G722 = 0
# codec-mask-opus = 0

# Log levels: 0=EMERG, 1=ALERT, 2=CRIT, 3=ERR, 4=WARN, 5=NOTICE, 6=INFO, 7=DEBUG
log-level = 6
log-stderr = false
log-facility = local5

# Log to file
log-file = /var/log/rtpengine/rtpengine.log

# Redis configuration for HA/clustering
# redis = 127.0.0.1:6379
# redis-db = 1
# redis-expires = 86400
# redis-allowed-errors = -1
# redis-disable-time = 10
# redis-cmd-timeout = 0
# redis-connect-timeout = 10

# Recording options
# recording-dir = /var/spool/rtpengine
# recording-method = proc
# recording-format = wav

# Table for iptables forwarding
table = 0

# TOS value for RTP packets
tos = 184

# B2B User Agent mode
# b2b-url = http://127.0.0.1:8080/

# Maximum sessions
max-sessions = 5000

# Kernel forwarding table
# If kernel module is loaded, use in-kernel forwarding
# forwarding-table = 0

# DTLS support for WebRTC
dtls-passive = false

# ICE processing
ice-force = true
ice-force-relay = false

# STUN/TURN functionality
# stun-only = false
# turn = true
# turn-ttl = 86400

# Homer/HEP integration for monitoring
# homer = 127.0.0.1:9060
# homer-protocol = udp
# homer-id = 1001

# Graphite metrics
# graphite = 127.0.0.1:2003
# graphite-interval = 60
# graphite-prefix = rtpengine

# Prometheus metrics endpoint
# prometheus-endpoint = 9103

# SSL/TLS certificates for DTLS
# cert = /etc/rtpengine/cert.pem
# key = /etc/rtpengine/key.pem

# Media encryption
# cipher-list = DEFAULT:!NULL:!aNULL:!MD5:!DSS

# SIP ping
# sip-ping = true
# sip-ping-interval = 30

# Load limiting
# load-limit = 0.9
# cpu-limit = 0.9
# bw-limit = 10000000