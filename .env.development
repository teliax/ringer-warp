# WARP Platform Staging Environment Configuration
# ============================================
# This file contains STAGING/SANDBOX credentials only
# Cloud-first approach - no local services required
# DO NOT use production credentials in this file
# DO NOT commit this file to version control
# ============================================

# ============================================
# DEPLOYMENT ENVIRONMENT
# ============================================
NODE_ENV=staging
APP_ENV=staging
DEBUG=true
LOG_LEVEL=debug

# ============================================
# API CONFIGURATION
# ============================================
API_BASE_URL=https://api-staging.ringer.tel
API_PUBLIC_URL=https://api-staging.ringer.tel
API_VERSION=v1
API_PORT=8080
API_RATE_LIMIT=10000
API_TIMEOUT_MS=30000

# ============================================
# FRONTEND URLS (Vercel Staging)
# ============================================
CUSTOMER_PORTAL_URL=https://console-staging.ringer.tel
ADMIN_PORTAL_URL=https://admin-staging.ringer.tel
PUBLIC_WEBSITE_URL=https://www-staging.ringer.tel

# ============================================
# DATABASE CONNECTIONS - DEVELOPMENT
# ============================================

# PostgreSQL (Main Database) - Cloud SQL Staging Instance
POSTGRES_HOST=10.x.x.x  # Private IP from Cloud SQL
POSTGRES_PORT=5432
POSTGRES_DB=warp_staging
POSTGRES_USER=warp_staging
POSTGRES_PASSWORD=
POSTGRES_SSL_MODE=require
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_CONNECTION_TIMEOUT_MS=10000

# CockroachDB (Distributed SQL) - Optional for Dev
COCKROACH_HOST=localhost
COCKROACH_PORT=26257
COCKROACH_DB=warp_global_dev
COCKROACH_USER=root
COCKROACH_PASSWORD=
COCKROACH_CLUSTER=dev-cluster
COCKROACH_SSL_MODE=disable

# Redis (Caching & Sessions) - Memorystore for Redis
REDIS_HOST=10.x.x.x  # Private IP from Memorystore
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CLUSTER_ENABLED=false
REDIS_TLS_ENABLED=true

# Legacy Kamailio Database (if migrating)
KAMAILIO_LEGACY_HOST=
KAMAILIO_LEGACY_PORT=3306
KAMAILIO_LEGACY_DB=
KAMAILIO_LEGACY_USER=
KAMAILIO_LEGACY_PASSWORD=

# ============================================
# AUTHENTICATION - DEVELOPMENT
# ============================================

# OAuth Provider (Auth0 Dev Tenant or Keycloak)
OAUTH_PROVIDER=auth0  # auth0 or keycloak

# Auth0 Development Configuration
AUTH0_DOMAIN=
AUTH0_CLIENT_ID=
AUTH0_CLIENT_SECRET=
AUTH0_AUDIENCE=https://api-staging.ringer.tel
AUTH0_MANAGEMENT_API_TOKEN=
AUTH0_CALLBACK_URL=https://console-staging.ringer.tel/auth/callback
AUTH0_M2M_CLIENT_ID=
AUTH0_M2M_CLIENT_SECRET=

# JWT Configuration (Development Keys)
JWT_SECRET=dev_jwt_secret_change_this_in_production_min_32_chars
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=dev_jwt_refresh_secret_change_this_min_32_chars
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# GOOGLE CLOUD PLATFORM - STAGING
# ============================================
GCP_PROJECT_ID=ringer-472421
GCP_REGION=us-central1
GCP_ZONE=us-central1-a
GCP_SERVICE_ACCOUNT_EMAIL=
GCP_SERVICE_ACCOUNT_KEY_PATH=

# Cloud Storage (Staging Buckets)
GCS_BUCKET_CDR=warp-cdr-staging
GCS_BUCKET_RECORDINGS=warp-recordings-staging
GCS_BUCKET_BACKUPS=warp-backups-staging

# BigQuery Configuration (Staging Dataset)
BQ_PROJECT_ID=ringer-472421
BQ_DATASET_TELECOM=warp_telecom_staging
BQ_TABLE_CDRS=cdrs
BQ_TABLE_MDRS=mdrs
BQ_LOCATION=US
BQ_PARTITION_EXPIRATION_DAYS=30  # Shorter for dev

# Pub/Sub Topics (Staging)
PUBSUB_TOPIC_CDRS=projects/${GCP_PROJECT_ID}/topics/cdrs-staging
PUBSUB_TOPIC_MDRS=projects/${GCP_PROJECT_ID}/topics/mdrs-staging
# PUBSUB_EMULATOR_HOST=  # Not used in staging

# ============================================
# TELECOM CORE SERVICES - DEVELOPMENT
# ============================================

# Kamailio SIP Server (GKE Staging Deployment)
KAMAILIO_DB_HOST=10.x.x.x  # Cloud SQL Private IP
KAMAILIO_DB_PORT=5432
KAMAILIO_DB_NAME=kamailio_staging
KAMAILIO_DB_USER=kamailio
KAMAILIO_DB_PASSWORD=
KAMAILIO_SIP_DOMAIN=sip-staging.ringer.tel
KAMAILIO_PUBLIC_IP=
KAMAILIO_PRIVATE_IP=
KAMAILIO_WS_PORT=8080
KAMAILIO_WSS_PORT=8443

# RTPEngine Media Server (GCP VMs Staging)
RTPENGINE_HOST=rtpengine-staging.ringer.tel
RTPENGINE_PORT=22222
RTPENGINE_CONTROL_PORT=22223
RTPENGINE_PUBLIC_IP=
RTPENGINE_PRIVATE_IP=
RTPENGINE_MIN_PORT=10000
RTPENGINE_MAX_PORT=20000
RTPENGINE_RECORDING_ENABLED=false
RTPENGINE_TRANSCODING_ENABLED=false

# Homer SIP Capture (GKE Staging)
HOMER_ENABLED=true
HOMER_HOST=homer-staging.ringer.tel
HOMER_HEP_PORT=9060
HOMER_DB_HOST=localhost
HOMER_DB_PORT=5432
HOMER_DB_NAME=homer_dev
HOMER_DB_USER=homer
HOMER_DB_PASSWORD=
HOMER_CAPTURE_ID=2001

# ============================================
# TELIQUE API (LERG/LRN/CNAM) - SANDBOX
# ============================================
TELIQUE_API_URL=https://api-sandbox.telique.com
TELIQUE_API_KEY=
TELIQUE_API_SECRET=
TELIQUE_ACCOUNT_ID=
TELIQUE_LERG_ENABLED=true
TELIQUE_LRN_ENABLED=true
TELIQUE_CNAM_ENABLED=false  # May not be available in sandbox
TELIQUE_CACHE_TTL_SECONDS=3600
TELIQUE_MOCK_MODE=false  # Set to true to use mock data

# ============================================
# SMS/MESSAGING - DEVELOPMENT
# ============================================

# Sinch SMS (Sandbox Account)
SINCH_ENVIRONMENT=sandbox
SINCH_APP_KEY=
SINCH_APP_SECRET=
SINCH_PROJECT_ID=
SINCH_SMS_SERVICE_PLAN_ID=
SINCH_WEBHOOK_SECRET=
SINCH_API_URL=https://sms.api.sinch.com
SINCH_TEST_MODE=true

# 10DLC Campaign Registry (TCR) - Sandbox
TCR_ENVIRONMENT=sandbox
TCR_API_URL=https://sandbox.api.campaignregistry.com/v1
TCR_API_KEY=
TCR_CSP_ID=
TCR_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/tcr

# ============================================
# TOLL-FREE MANAGEMENT - SANDBOX
# ============================================

# Somos Toll-Free (Sandbox/Test Environment)
SOMOS_ENVIRONMENT=sandbox
SOMOS_API_URL=https://sandbox.api.somos.com/v1
SOMOS_USERNAME=
SOMOS_PASSWORD=
SOMOS_CLIENT_ID=
SOMOS_CLIENT_SECRET=
SOMOS_RESP_ORG_ID=
SOMOS_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/somos
SOMOS_TEST_MODE=true

# ============================================
# NUMBER PORTING - DEVELOPMENT
# ============================================

# Teliport/Number Porting (Sandbox)
TELIPORT_ENVIRONMENT=sandbox
TELIPORT_API_URL=https://api-sandbox.teliport.com
TELIPORT_API_TOKEN=
TELIPORT_SPID=
TELIPORT_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/teliport
TELIPORT_TEST_MODE=true

# ============================================
# BILLING & PAYMENTS - SANDBOX
# ============================================

# Authorize.Net (Sandbox Account)
AUTHORIZENET_ENVIRONMENT=SANDBOX
AUTHORIZENET_API_LOGIN_ID=
AUTHORIZENET_TRANSACTION_KEY=
AUTHORIZENET_SIGNATURE_KEY=
AUTHORIZENET_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/authorizenet
AUTHORIZENET_TEST_MODE=true

# ACH Processing (Internal Wells Fargo Integration)
ACH_ENABLED=false  # Disabled for initial development
ACH_API_URL=
ACH_API_KEY=
ACH_API_SECRET=
ACH_WEBHOOK_URL=

# Avalara Tax Service (Sandbox)
AVALARA_ENVIRONMENT=Sandbox
AVALARA_ACCOUNT_ID=
AVALARA_LICENSE_KEY=
AVALARA_COMPANY_CODE=DEFAULT
AVALARA_SERVICE_URL=https://sandbox-rest.avatax.com
AVALARA_TEST_MODE=true

# ============================================
# CRM & ERP - SANDBOX
# ============================================

# HubSpot (Development Portal)
HUBSPOT_ENVIRONMENT=sandbox
HUBSPOT_API_KEY=
HUBSPOT_ACCESS_TOKEN=
HUBSPOT_CLIENT_ID=
HUBSPOT_CLIENT_SECRET=
HUBSPOT_PORTAL_ID=
HUBSPOT_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/hubspot
HUBSPOT_TEST_MODE=true

# HubSpot Service Hub (Uses same credentials)
HUBSPOT_SERVICE_HUB_ENABLED=true
HUBSPOT_TICKET_PIPELINE_ID=
HUBSPOT_CHAT_FLOW_ID=

# NetSuite (Sandbox Account)
NETSUITE_ENVIRONMENT=SANDBOX
NETSUITE_ACCOUNT_ID=
NETSUITE_CONSUMER_KEY=
NETSUITE_CONSUMER_SECRET=
NETSUITE_TOKEN_ID=
NETSUITE_TOKEN_SECRET=
NETSUITE_API_VERSION=2023.2
NETSUITE_SYNC_ENABLED=false  # Start with disabled
NETSUITE_TEST_MODE=true

# NetSuite Custom Fields (Development)
NETSUITE_SUBSIDIARY_ID=1
NETSUITE_DEPARTMENT_ID=
NETSUITE_LOCATION_ID=
NETSUITE_CLASS_ID=

# ============================================
# EMAIL SERVICE - DEVELOPMENT
# ============================================

# SendGrid (Development Account)
SENDGRID_ENVIRONMENT=development
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=staging@ringer.tel
SENDGRID_FROM_NAME=Ringer Staging
SENDGRID_WEBHOOK_URL=https://api-staging.ringer.tel/v1/webhooks/sendgrid
SENDGRID_SANDBOX_MODE=true  # Validates but doesn't send

# Email Templates (Development)
SENDGRID_TEMPLATE_WELCOME=
SENDGRID_TEMPLATE_PASSWORD_RESET=
SENDGRID_TEMPLATE_INVOICE=
SENDGRID_TEMPLATE_USAGE_ALERT=

# ============================================
# CNAM SERVICES - DEVELOPMENT
# ============================================

# TransUnion/TruContact (Sandbox if available)
TRANSUNION_ENVIRONMENT=sandbox
TRANSUNION_API_URL=https://api-sandbox.transunion.com/trucontact
TRANSUNION_CLIENT_ID=
TRANSUNION_CLIENT_SECRET=
TRANSUNION_ACCOUNT_ID=
TRANSUNION_TEST_MODE=true

# ============================================
# MONITORING & OBSERVABILITY - DEVELOPMENT
# ============================================

# Prometheus (GCP Managed Prometheus)
PROMETHEUS_HOST=prometheus-staging.ringer.tel
PROMETHEUS_PORT=9090
PROMETHEUS_PUSHGATEWAY_URL=https://pushgateway-staging.ringer.tel

# Grafana (GKE Deployment)
GRAFANA_HOST=grafana-staging.ringer.tel
GRAFANA_PORT=443
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# OpenTelemetry (Cloud Trace)
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-staging.ringer.tel:4317
OTEL_SERVICE_NAME=warp-api-staging
OTEL_TRACES_ENABLED=true
OTEL_METRICS_ENABLED=true
OTEL_LOGS_ENABLED=true

# Sentry (Development Project)
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0  # 100% in dev

# ============================================
# FEATURE FLAGS - DEVELOPMENT
# ============================================
FEATURE_E911_ENABLED=false  # Requires production certs
FEATURE_CNAM_ENABLED=false
FEATURE_STIR_SHAKEN_ENABLED=false  # Requires production certs
FEATURE_TRANSCODING_ENABLED=true
FEATURE_RECORDING_ENABLED=true
FEATURE_SMS_ENABLED=true
FEATURE_MMS_ENABLED=false
FEATURE_RCS_ENABLED=false
FEATURE_INTERNATIONAL_ENABLED=false  # Start with domestic only

# ============================================
# MOCK SERVICES - DEVELOPMENT ONLY
# ============================================
MOCK_EXTERNAL_SERVICES=false  # Set to true to mock all external APIs
MOCK_SMS_PROVIDER=true  # Mock SMS sending
MOCK_PAYMENT_PROCESSOR=true  # Mock payment processing
MOCK_TAX_SERVICE=true  # Mock tax calculations
MOCK_LRN_LOOKUPS=false  # Use real Telique sandbox
MOCK_PORTING_API=true  # Mock porting requests

# ============================================
# DEVELOPMENT TOOLS
# ============================================

# Hot Reload
HOT_RELOAD_ENABLED=true
WATCH_MODE=true

# Database Migrations
RUN_MIGRATIONS_ON_START=true
SEED_DATABASE=true
SEED_TEST_CUSTOMERS=10
SEED_TEST_TRUNKS=5
SEED_TEST_NUMBERS=100

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs
GRAPHQL_PLAYGROUND_ENABLED=true

# Testing (Separate Cloud SQL Instance)
TEST_DATABASE_URL=postgresql://test:test@10.x.x.x:5432/warp_test
TEST_REDIS_URL=redis://10.x.x.x:6379/1
CODE_COVERAGE_ENABLED=true

# ============================================
# SECURITY - DEVELOPMENT
# ============================================

# CORS (Staging Domains)
CORS_ALLOWED_ORIGINS=https://console-staging.ringer.tel,https://admin-staging.ringer.tel,https://api-staging.ringer.tel
CORS_ALLOWED_METHODS=*
CORS_ALLOWED_HEADERS=*
CORS_CREDENTIALS=true

# Session Configuration (Staging)
SESSION_SECRET=staging_session_secret_change_this_in_production
SESSION_MAX_AGE_MS=86400000
SESSION_SECURE=true  # HTTPS only in staging
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# Rate Limiting (Relaxed for Development)
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=10000

# ============================================
# WEBHOOK CONFIGURATION - DEVELOPMENT
# ============================================
WEBHOOK_SECRET=dev_webhook_secret_min_32_chars_change_in_prod
WEBHOOK_RETRY_ATTEMPTS=1
WEBHOOK_RETRY_DELAY_MS=1000
WEBHOOK_TIMEOUT_MS=5000

# Ngrok or Similar (for webhook testing)
TUNNEL_ENABLED=false
TUNNEL_SUBDOMAIN=
TUNNEL_AUTH_TOKEN=

# ============================================
# COMPLIANCE & REGULATORY - DEVELOPMENT
# ============================================

# STIR/SHAKEN (Disabled for Development)
STIR_SHAKEN_ENABLED=false
STIR_SHAKEN_CERT=
STIR_SHAKEN_KEY=
STIR_SHAKEN_PROVIDER=

# E911 (Test Provider)
E911_ENABLED=false
E911_PROVIDER=bandwidth
E911_API_KEY=
E911_API_SECRET=

# ============================================
# ALERTING - DEVELOPMENT
# ============================================

# PagerDuty (Optional for Dev)
PAGERDUTY_ENABLED=false
PAGERDUTY_INTEGRATION_KEY=
PAGERDUTY_SERVICE_ID=

# Slack (Staging Workspace)
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=
SLACK_BOT_TOKEN=
SLACK_ALERTS_CHANNEL=#warp-staging-alerts
SLACK_OPS_CHANNEL=#warp-staging-ops

# ============================================
# CI/CD & DEPLOYMENT
# ============================================

# GitHub Actions / Cloud Build
DOCKER_REGISTRY=gcr.io/${GCP_PROJECT_ID}
IMAGE_TAG=staging-${GITHUB_SHA:-latest}

# GKE Deployment
GKE_CLUSTER_NAME=warp-staging
GKE_CLUSTER_REGION=us-central1
KUBERNETES_NAMESPACE=warp-staging

# Vercel Deployment (Frontend)
VERCEL_ENV=preview
VERCEL_URL=https://console-staging.ringer.tel

# ============================================
# NOTES FOR DEVELOPERS
# ============================================
# 1. Copy this file to .env.staging and fill in credentials
# 2. Never commit .env.staging to version control
# 3. All services deployed to GCP staging project
# 4. Frontend auto-deploys to Vercel on commit
# 5. Backend auto-deploys to GKE on commit
# 6. Access API docs at https://api-staging.ringer.tel/api-docs
# 7. Access Grafana at https://grafana-staging.ringer.tel
# 8. No local services required - everything in cloud
# ============================================